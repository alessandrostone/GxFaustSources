// generated automatically
// DO NOT MODIFY!
declare id "luna";
declare name "Luna";
declare category "Extern";
declare shortname "Luna";
declare description "Luna";

import("stdfaust.lib");

p1 = pre : fi.iir((b0/a0,b1/a0,b2/a0,b3/a0,b4/a0,b5/a0),(a1/a0,a2/a0,a3/a0,a4/a0,a5/a0)) : clayjonesod_clip with {
    LogPot(a, x) = ba.if(a, (exp(a * x) - 1) / (exp(a) - 1), x);
    Inverted(b, x) = ba.if(b, 1 - x, x);
    s = 0.993;
    fs = float(ma.SR);
    pre = _;


    Gain = vslider("Gain[name:Gain]", 0.5, 0, 1, 0.01) : Inverted(0) : LogPot(3) : si.smooth(s);

    b0 = Gain*fs*(fs*(fs*(1.16645524759018e-20*fs + 1.75719073305268e-14) + 1.17892606474896e-16) + 3.79114729912722e-17) + fs*(fs*(fs*(1.16645524759018e-22*fs + 2.90077430912532e-16) + 6.02914718028834e-14) + 1.97249212285178e-14);

    b1 = Gain*fs*(fs*(fs*(-3.49936574277054e-20*fs - 1.75719073305268e-14) + 1.17892606474896e-16) + 1.13734418973816e-16) + fs*(fs*(fs*(-3.49936574277054e-22*fs - 2.90077430912532e-16) + 6.02914718028834e-14) + 5.91747636855535e-14);

    b2 = Gain*fs*(fs*(fs*(2.33291049518036e-20*fs - 3.51438146610535e-14) - 2.35785212949793e-16) + 7.58229459825443e-17) + fs*(fs*(fs*(2.33291049518036e-22*fs - 5.80154861825064e-16) - 1.20582943605767e-13) + 3.94498424570356e-14);

    b3 = Gain*fs*(fs*(fs*(2.33291049518036e-20*fs + 3.51438146610535e-14) - 2.35785212949793e-16) - 7.58229459825443e-17) + fs*(fs*(fs*(2.33291049518036e-22*fs + 5.80154861825064e-16) - 1.20582943605767e-13) - 3.94498424570356e-14);

    b4 = Gain*fs*(fs*(fs*(-3.49936574277054e-20*fs + 1.75719073305268e-14) + 1.17892606474896e-16) - 1.13734418973816e-16) + fs*(fs*(fs*(-3.49936574277054e-22*fs + 2.90077430912532e-16) + 6.02914718028834e-14) - 5.91747636855535e-14);

    b5 = Gain*fs*(fs*(fs*(1.16645524759018e-20*fs - 1.75719073305268e-14) + 1.17892606474896e-16) - 3.79114729912722e-17) + fs*(fs*(fs*(1.16645524759018e-22*fs - 2.90077430912532e-16) + 6.02914718028834e-14) - 1.97249212285178e-14);

    a0 = Gain*(fs*(fs*(fs*(fs*(5.18258138597322e-24*fs + 1.49019916891358e-20) + 7.38613140421547e-18) + 6.63058268701375e-16) + 2.20256335157636e-14) + 2.22472793122126e-13) + fs*(fs*(fs*(fs*(5.18258138597322e-26*fs + 5.09586413480014e-20) + 1.43759195629447e-16) + 6.62887520745294e-14) + 4.98509295718602e-12) + 1.15750140376986e-10;

    a1 = Gain*(fs*(fs*(fs*(fs*(-2.59129069298661e-23*fs - 4.47059750674074e-20) - 7.38613140421547e-18) + 6.63058268701375e-16) + 6.60769005472907e-14) + 1.11236396561063e-12) + fs*(fs*(fs*(fs*(-2.59129069298661e-25*fs - 1.52875924044004e-19) - 1.43759195629447e-16) + 6.62887520745294e-14) + 1.49552788715581e-11) + 5.78750701884929e-10;

    a2 = Gain*(fs*(fs*(fs*(fs*(5.18258138597322e-23*fs + 2.98039833782716e-20) - 1.47722628084309e-17) - 1.32611653740275e-15) + 4.40512670315271e-14) + 2.22472793122126e-12) + fs*(fs*(fs*(fs*(5.18258138597322e-25*fs + 1.01917282696003e-19) - 2.87518391258893e-16) - 1.32577504149059e-13) + 9.97018591437205e-12) + 1.15750140376986e-9;

    a3 = Gain*(fs*(fs*(fs*(fs*(-5.18258138597322e-23*fs + 2.98039833782716e-20) + 1.47722628084309e-17) - 1.32611653740275e-15) - 4.40512670315271e-14) + 2.22472793122126e-12) + fs*(fs*(fs*(fs*(-5.18258138597322e-25*fs + 1.01917282696003e-19) + 2.87518391258893e-16) - 1.32577504149059e-13) - 9.97018591437205e-12) + 1.15750140376986e-9;

    a4 = Gain*(fs*(fs*(fs*(fs*(2.59129069298661e-23*fs - 4.47059750674074e-20) + 7.38613140421547e-18) + 6.63058268701375e-16) - 6.60769005472907e-14) + 1.11236396561063e-12) + fs*(fs*(fs*(fs*(2.59129069298661e-25*fs - 1.52875924044004e-19) + 1.43759195629447e-16) + 6.62887520745294e-14) - 1.49552788715581e-11) + 5.78750701884929e-10;

    a5 = Gain*(fs*(fs*(fs*(fs*(-5.18258138597322e-24*fs + 1.49019916891358e-20) - 7.38613140421547e-18) + 6.63058268701375e-16) - 2.20256335157636e-14) + 2.22472793122126e-13) + fs*(fs*(fs*(fs*(-5.18258138597322e-26*fs + 5.09586413480014e-20) - 1.43759195629447e-16) + 6.62887520745294e-14) - 4.98509295718602e-12) + 1.15750140376986e-10;
};

    clayjonesod_clip = ffunction(float clayjonesodclip(float), "clayjonesod_table.h", "");

p2 = pre : fi.iir((b0/a0,b1/a0,b2/a0,b3/a0,b4/a0,b5/a0),(a1/a0,a2/a0,a3/a0,a4/a0,a5/a0)) with {
    LogPot(a, x) = ba.if(a, (exp(a * x) - 1) / (exp(a) - 1), x);
    Inverted(b, x) = ba.if(b, 1 - x, x);
    s = 0.993;
    fs = float(ma.SR);
    pre = _;



    Volume = vslider("Volume[name:Volume]", 0.5, 0, 1, 0.01) : Inverted(0) : si.smooth(s);

    Tone = vslider("Tone[name:Tone]", 0.5, 0, 1, 0.01) : Inverted(1) : LogPot(3) : si.smooth(s);

    b0 = Tone*(Tone*(-2.77751637827196e-20*Volume*pow(fs,4) + pow(fs,3)*(-1.37527509992106e-21*fs - 1.34830892149124e-20)) + 2.64197357901229e-20*Volume*pow(fs,4) + pow(fs,3)*(1.30816167504491e-21*fs + 1.28251144612247e-20)) + Volume*pow(fs,3)*(1.60200034256798e-21*fs + 2.54723502036432e-18) + pow(fs,2)*(fs*(7.93223470591911e-23*fs + 1.26902899232878e-19) + 1.23652185454578e-18);

    b1 = Tone*(Tone*(8.33254913481587e-20*Volume*pow(fs,4) + pow(fs,3)*(4.12582529976319e-21*fs + 1.34830892149124e-20)) - 7.92592073703686e-20*Volume*pow(fs,4) + pow(fs,3)*(-3.92448502513474e-21*fs - 1.28251144612247e-20)) + Volume*pow(fs,3)*(-4.80600102770394e-21*fs - 2.54723502036432e-18) + pow(fs,2)*(fs*(-2.37967041177573e-22*fs - 1.26902899232878e-19) + 1.23652185454578e-18);

    b2 = Tone*(Tone*(-5.55503275654391e-20*Volume*pow(fs,4) + pow(fs,3)*(-2.75055019984213e-21*fs + 2.69661784298248e-20)) + 5.28394715802457e-20*Volume*pow(fs,4) + pow(fs,3)*(2.61632335008983e-21*fs - 2.56502289224493e-20)) + Volume*pow(fs,3)*(3.20400068513596e-21*fs - 5.09447004072864e-18) + pow(fs,2)*(fs*(1.58644694118382e-22*fs - 2.53805798465755e-19) - 2.47304370909156e-18);

    b3 = Tone*(Tone*(-5.55503275654391e-20*Volume*pow(fs,4) + pow(fs,3)*(-2.75055019984213e-21*fs - 2.69661784298248e-20)) + 5.28394715802457e-20*Volume*pow(fs,4) + pow(fs,3)*(2.61632335008983e-21*fs + 2.56502289224493e-20)) + Volume*pow(fs,3)*(3.20400068513596e-21*fs + 5.09447004072864e-18) + pow(fs,2)*(fs*(1.58644694118382e-22*fs + 2.53805798465755e-19) - 2.47304370909156e-18);

    b4 = Tone*(Tone*(8.33254913481587e-20*Volume*pow(fs,4) + pow(fs,3)*(4.12582529976319e-21*fs - 1.34830892149124e-20)) - 7.92592073703686e-20*Volume*pow(fs,4) + pow(fs,3)*(-3.92448502513474e-21*fs + 1.28251144612247e-20)) + Volume*pow(fs,3)*(-4.80600102770394e-21*fs + 2.54723502036432e-18) + pow(fs,2)*(fs*(-2.37967041177573e-22*fs + 1.26902899232878e-19) + 1.23652185454578e-18);

    b5 = Tone*(Tone*(-2.77751637827196e-20*Volume*pow(fs,4) + pow(fs,3)*(-1.37527509992106e-21*fs + 1.34830892149124e-20)) + 2.64197357901229e-20*Volume*pow(fs,4) + pow(fs,3)*(1.30816167504491e-21*fs - 1.28251144612247e-20)) + Volume*pow(fs,3)*(1.60200034256798e-21*fs - 2.54723502036432e-18) + pow(fs,2)*(fs*(7.93223470591911e-23*fs - 1.26902899232878e-19) + 1.23652185454578e-18);

    a0 = Tone*(Tone*(Volume*(Volume*pow(fs,3)*(fs*(3.26888893809841e-24*fs + 7.44332770872022e-21) + 3.18969717896861e-20) + pow(fs,2)*(fs*(fs*(-3.38195956674071e-24*fs - 7.71728631127486e-21) - 7.05578294341804e-20) - 1.5948485894843e-19)) + fs*(fs*(fs*(fs*(-1.32010814298354e-23*fs - 3.03027183351676e-20) - 6.84276779612844e-19) - 4.24546601422249e-18) - 7.97424294742151e-18)) + Volume*(Volume*pow(fs,3)*(fs*(-3.24012140790065e-24*fs - 7.67499516922748e-21) - 3.28921445508631e-20) + pow(fs,2)*(fs*(fs*(3.35219696978309e-24*fs + 7.95682197455569e-21) + 7.27563985561598e-20) + 1.64460722754316e-19)) + fs*(fs*(fs*(fs*(1.3084906632873e-23*fs + 3.12361406046552e-20) + 7.05551282979477e-19) + 4.37778250902093e-18) + 8.22303613771578e-18)) + Volume*(Volume*pow(fs,2)*(fs*(fs*(-5.77869071187722e-26*fs - 4.33984190304919e-22) - 6.83196456354966e-19) - 2.9252446053416e-18) + fs*(fs*(fs*(fs*(5.97857519981625e-26*fs + 4.49287257802742e-22) + 7.09017995314386e-19) + 6.47367501296596e-18) + 1.4626223026708e-17)) + fs*(fs*(fs*(fs*(2.33366651758139e-25*fs + 1.75690782060505e-21) + 2.79137370307022e-18) + 6.28309950213502e-17) + 3.89491911788432e-16) + 7.31311151335399e-16;

    a1 = Tone*(Tone*(Volume*(Volume*pow(fs,3)*(fs*(-1.63444446904921e-23*fs - 2.23299831261606e-20) - 3.18969717896861e-20) + pow(fs,2)*(fs*(fs*(1.69097978337035e-23*fs + 2.31518589338246e-20) + 7.05578294341804e-20) - 1.5948485894843e-19)) + fs*(fs*(fs*(fs*(6.60054071491768e-23*fs + 9.09081550055028e-20) + 6.84276779612844e-19) - 4.24546601422249e-18) - 2.39227288422645e-17)) + Volume*(Volume*pow(fs,3)*(fs*(1.62006070395032e-23*fs + 2.30249855076824e-20) + 3.28921445508631e-20) + pow(fs,2)*(fs*(fs*(-1.67609848489154e-23*fs - 2.38704659236671e-20) - 7.27563985561598e-20) + 1.64460722754316e-19)) + fs*(fs*(fs*(fs*(-6.54245331643652e-23*fs - 9.37084218139656e-20) - 7.05551282979477e-19) + 4.37778250902093e-18) + 2.46691084131473e-17)) + Volume*(Volume*pow(fs,2)*(fs*(fs*(2.88934535593861e-25*fs + 1.30195257091476e-21) + 6.83196456354966e-19) - 2.9252446053416e-18) + fs*(fs*(fs*(fs*(-2.98928759990812e-25*fs - 1.34786177340823e-21) - 7.09017995314386e-19) + 6.47367501296596e-18) + 4.38786690801239e-17)) + fs*(fs*(fs*(fs*(-1.16683325879069e-24*fs - 5.27072346181514e-21) - 2.79137370307022e-18) + 6.28309950213502e-17) + 1.1684757353653e-15) + 3.65655575667699e-15;

    a2 = Tone*(Tone*(Volume*(Volume*pow(fs,3)*(fs*(3.26888893809841e-23*fs + 1.48866554174404e-20) - 6.37939435793721e-20) + pow(fs,2)*(fs*(fs*(-3.38195956674071e-23*fs - 1.54345726225497e-20) + 1.41115658868361e-19) + 3.18969717896861e-19)) + fs*(fs*(fs*(fs*(-1.32010814298354e-22*fs - 6.06054366703352e-20) + 1.36855355922569e-18) + 8.49093202844497e-18) - 1.5948485894843e-17)) + Volume*(Volume*pow(fs,3)*(fs*(-3.24012140790065e-23*fs - 1.5349990338455e-20) + 6.57842891017263e-20) + pow(fs,2)*(fs*(fs*(3.35219696978309e-23*fs + 1.59136439491114e-20) - 1.4551279711232e-19) - 3.28921445508631e-19)) + fs*(fs*(fs*(fs*(1.3084906632873e-22*fs + 6.24722812093104e-20) - 1.41110256595895e-18) - 8.75556501804186e-18) + 1.64460722754316e-17)) + Volume*(Volume*pow(fs,2)*(fs*(fs*(-5.77869071187722e-25*fs - 8.67968380609837e-22) + 1.36639291270993e-18) + 5.85048921068319e-18) + fs*(fs*(fs*(fs*(5.97857519981625e-25*fs + 8.98574515605485e-22) - 1.41803599062877e-18) - 1.29473500259319e-17) + 2.9252446053416e-17)) + fs*(fs*(fs*(fs*(2.33366651758139e-24*fs + 3.51381564121009e-21) - 5.58274740614043e-18) - 1.256619900427e-16) + 7.78983823576864e-16) + 7.31311151335399e-15;

    a3 = Tone*(Tone*(Volume*(Volume*pow(fs,3)*(fs*(-3.26888893809841e-23*fs + 1.48866554174404e-20) + 6.37939435793721e-20) + pow(fs,2)*(fs*(fs*(3.38195956674071e-23*fs - 1.54345726225497e-20) - 1.41115658868361e-19) + 3.18969717896861e-19)) + fs*(fs*(fs*(fs*(1.32010814298354e-22*fs - 6.06054366703352e-20) - 1.36855355922569e-18) + 8.49093202844497e-18) + 1.5948485894843e-17)) + Volume*(Volume*pow(fs,3)*(fs*(3.24012140790065e-23*fs - 1.5349990338455e-20) - 6.57842891017263e-20) + pow(fs,2)*(fs*(fs*(-3.35219696978309e-23*fs + 1.59136439491114e-20) + 1.4551279711232e-19) - 3.28921445508631e-19)) + fs*(fs*(fs*(fs*(-1.3084906632873e-22*fs + 6.24722812093104e-20) + 1.41110256595895e-18) - 8.75556501804186e-18) - 1.64460722754316e-17)) + Volume*(Volume*pow(fs,2)*(fs*(fs*(5.77869071187722e-25*fs - 8.67968380609837e-22) - 1.36639291270993e-18) + 5.85048921068319e-18) + fs*(fs*(fs*(fs*(-5.97857519981625e-25*fs + 8.98574515605485e-22) + 1.41803599062877e-18) - 1.29473500259319e-17) - 2.9252446053416e-17)) + fs*(fs*(fs*(fs*(-2.33366651758139e-24*fs + 3.51381564121009e-21) + 5.58274740614043e-18) - 1.256619900427e-16) - 7.78983823576864e-16) + 7.31311151335399e-15;

    a4 = Tone*(Tone*(Volume*(Volume*pow(fs,3)*(fs*(1.63444446904921e-23*fs - 2.23299831261606e-20) + 3.18969717896861e-20) + pow(fs,2)*(fs*(fs*(-1.69097978337035e-23*fs + 2.31518589338246e-20) - 7.05578294341804e-20) - 1.5948485894843e-19)) + fs*(fs*(fs*(fs*(-6.60054071491768e-23*fs + 9.09081550055028e-20) - 6.84276779612844e-19) - 4.24546601422249e-18) + 2.39227288422645e-17)) + Volume*(Volume*pow(fs,3)*(fs*(-1.62006070395032e-23*fs + 2.30249855076824e-20) - 3.28921445508631e-20) + pow(fs,2)*(fs*(fs*(1.67609848489154e-23*fs - 2.38704659236671e-20) + 7.27563985561598e-20) + 1.64460722754316e-19)) + fs*(fs*(fs*(fs*(6.54245331643652e-23*fs - 9.37084218139656e-20) + 7.05551282979477e-19) + 4.37778250902093e-18) - 2.46691084131473e-17)) + Volume*(Volume*pow(fs,2)*(fs*(fs*(-2.88934535593861e-25*fs + 1.30195257091476e-21) - 6.83196456354966e-19) - 2.9252446053416e-18) + fs*(fs*(fs*(fs*(2.98928759990812e-25*fs - 1.34786177340823e-21) + 7.09017995314386e-19) + 6.47367501296596e-18) - 4.38786690801239e-17)) + fs*(fs*(fs*(fs*(1.16683325879069e-24*fs - 5.27072346181514e-21) + 2.79137370307022e-18) + 6.28309950213502e-17) - 1.1684757353653e-15) + 3.65655575667699e-15;

    a5 = Tone*(Tone*(Volume*(Volume*pow(fs,3)*(fs*(-3.26888893809841e-24*fs + 7.44332770872022e-21) - 3.18969717896861e-20) + pow(fs,2)*(fs*(fs*(3.38195956674071e-24*fs - 7.71728631127486e-21) + 7.05578294341804e-20) - 1.5948485894843e-19)) + fs*(fs*(fs*(fs*(1.32010814298354e-23*fs - 3.03027183351676e-20) + 6.84276779612844e-19) - 4.24546601422249e-18) + 7.97424294742151e-18)) + Volume*(Volume*pow(fs,3)*(fs*(3.24012140790065e-24*fs - 7.67499516922748e-21) + 3.28921445508631e-20) + pow(fs,2)*(fs*(fs*(-3.35219696978309e-24*fs + 7.95682197455569e-21) - 7.27563985561598e-20) + 1.64460722754316e-19)) + fs*(fs*(fs*(fs*(-1.3084906632873e-23*fs + 3.12361406046552e-20) - 7.05551282979477e-19) + 4.37778250902093e-18) - 8.22303613771578e-18)) + Volume*(Volume*pow(fs,2)*(fs*(fs*(5.77869071187722e-26*fs - 4.33984190304919e-22) + 6.83196456354966e-19) - 2.9252446053416e-18) + fs*(fs*(fs*(fs*(-5.97857519981625e-26*fs + 4.49287257802742e-22) - 7.09017995314386e-19) + 6.47367501296596e-18) - 1.4626223026708e-17)) + fs*(fs*(fs*(fs*(-2.33366651758139e-25*fs + 1.75690782060505e-21) - 2.79137370307022e-18) + 6.28309950213502e-17) - 3.89491911788432e-16) + 7.31311151335399e-16;
};

process =  p1 : p2 ;